{% extends "base_club_dashboard.html" %}

{% block content %}
<div class="xl:pr-[20%] bg-indigo-50 w-full px-4 md:px-8 min-h-screen pb-12">
  <div class="flex justify-between items-center py-8">
    <h1 class="text-4xl font-bold text-indigo-800">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>
    <a
      href="{% url 'addStudent' %}"
      class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition duration-300"
    >
      Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
    </a>
  </div>

  <div class="bg-white rounded-xl shadow-lg overflow-hidden">
    <table class="w-full text-sm text-right text-gray-500">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50">
        <tr>
          <th scope="col" class="px-6 py-3">Ø§Ù„Ø§Ø³Ù…</th>
          <th scope="col" class="px-6 py-3">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
          <th scope="col" class="px-6 py-3">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th>
          <th scope="col" class="px-6 py-3">Ø§Ù„Ù‡Ø§ØªÙ</th>
          <th scope="col" class="px-6 py-3">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</th>
          <th scope="col" class="px-6 py-3">Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</th>
          <th scope="col" class="px-6 py-3">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
        {% for student in students %}
        <tr class="bg-white border-b hover:bg-gray-50">
          <td class="px-6 py-4 font-medium text-gray-900">
            {{ student.user.username }}
          </td>
          <td class="px-6 py-4">{{ student.user.email }}</td>
          <td class="px-6 py-4">
            {{ student.student_profile.full_name|default:"âŒ ØºÙŠØ± Ù…ØªÙˆÙØ±" }}
          </td>
          <td class="px-6 py-4">
            {{ student.student_profile.phone|default:"âŒ ØºÙŠØ± Ù…ØªÙˆÙØ±" }}
          </td>
          <td class="px-6 py-4">
            {{ student.student_profile.birthday|default:"âŒ ØºÙŠØ± Ù…ØªÙˆÙØ±" }}
          </td>

          <!-- âœ… Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ -->
          <td class="px-6 py-4">
            {% if student.subscription_status == "active" %}
              <span class="text-green-600 font-bold">âœ… Ù†Ø´Ø·</span>
            {% elif student.subscription_status == "expiring_soon" %}
              <span class="text-yellow-500 font-bold">âš ï¸ Ø³ÙŠÙ†ØªÙ‡ÙŠ Ù‚Ø±ÙŠØ¨Ù‹Ø§</span>
            {% elif student.subscription_status == "expired" %}
              <span class="text-red-600 font-bold">âŒ Ù…Ù†ØªÙ‡ÙŠ</span>
            {% else %}
              <span class="text-gray-500">ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ</span>
            {% endif %}
          </td>

          <!-- âœ… Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¨ØªØµÙ…ÙŠÙ… Ø§Ø­ØªØ±Ø§ÙÙŠ -->
          <td class="px-6 py-4 flex flex-col md:flex-row gap-2">
            <a href="{% url 'editStudent' student.student_profile.id %}"
               class="inline-flex items-center justify-center bg-blue-600 text-white text-xs font-semibold px-4 py-1 rounded-md hover:bg-blue-700 transition duration-200">
              âœï¸ ØªØ¹Ø¯ÙŠÙ„
            </a>
            <a href="{% url 'deleteStudent' student.student_profile.id %}"
               class="inline-flex items-center justify-center bg-red-600 text-white text-xs font-semibold px-4 py-1 rounded-md hover:bg-red-700 transition duration-200">
              ğŸ—‘ Ø­Ø°Ù
            </a>
          </td>
        </tr>
        {% empty %}
        <tr class="bg-white border-b">
          <td colspan="7" class="px-6 py-4 text-center text-gray-500">
            ğŸš« Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡ Ø­Ø§Ù„ÙŠØ§Ù‹
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
